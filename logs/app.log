2025-02-22 22:06:04 - app - INFO - Логирование успешно настроено
2025-02-22 22:06:05 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/docs
2025-02-22 22:06:05 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:06:05 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/openapi.json
2025-02-22 22:06:05 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:06:39 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/api/auth/test-logging
2025-02-22 22:06:39 - api.auth.router - INFO - Это info сообщение
2025-02-22 22:06:39 - api.auth.router - WARNING - Это warning сообщение
2025-02-22 22:06:39 - api.auth.router - ERROR - Это error сообщение: Тестовая ошибка
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\auth\router.py", line 90, in test_logging
    raise ValueError("Тестовая ошибка")
ValueError: Тестовая ошибка
2025-02-22 22:06:39 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:07:37 - app - INFO - Логирование успешно настроено
2025-02-22 22:08:39 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.password, users.email, users.email_confirmed, users.is_active, users.is_superuser, users.first_name, users.last_name, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00282s] ('awdsdwa@mail.ru',)
2025-02-22 22:08:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-02-22 22:08:39 - middleware.error_handler - INFO - Исходящий ответ: 400
2025-02-22 22:09:37 - app - INFO - Логирование успешно настроено
2025-02-22 22:09:39 - app - INFO - Логирование успешно настроено
2025-02-22 22:09:45 - app - INFO - Логирование успешно настроено
2025-02-22 22:09:46 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:09:46 - middleware.error_handler - INFO - Исходящий ответ: 400
2025-02-22 22:13:05 - app - INFO - Логирование успешно настроено
2025-02-22 22:13:07 - app - INFO - Логирование успешно настроено
2025-02-22 22:13:16 - app - INFO - Логирование успешно настроено
2025-02-22 22:13:19 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:13:19 - api.auth.router - INFO - Попытка входа пользователя: awdsdwa@mail.ru
2025-02-22 22:13:19 - middleware.error_handler - INFO - Исходящий ответ: 400
2025-02-22 22:13:31 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:13:31 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:13:32 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:13:32 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:13:32 - middleware.error_handler - ERROR - Необработанное исключение: 'NoneType' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\users_utils.py", line 21, in get_current_user
    payload = decode_access_token(token)
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\JWTUtils.py", line 31, in decode_access_token
    return jwt.decode(
           ~~~~~~~~~~^
        token, auth_data["secret_key"], algorithms=[auth_data["algorithm"]]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'rsplit'
2025-02-22 22:14:31 - app - INFO - Логирование успешно настроено
2025-02-22 22:14:32 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/docs
2025-02-22 22:14:32 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:14:33 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/openapi.json
2025-02-22 22:14:33 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:15:26 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:15:26 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:15:26 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:15:26 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:15:26 - middleware.error_handler - ERROR - Необработанное исключение: 'NoneType' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\users_utils.py", line 21, in get_current_user
    payload = decode_access_token(token)
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\JWTUtils.py", line 31, in decode_access_token
    return jwt.decode(
           ~~~~~~~~~~^
        token, auth_data["secret_key"], algorithms=[auth_data["algorithm"]]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'rsplit'
2025-02-22 22:24:28 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:24:28 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:24:28 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:24:28 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:24:28 - middleware.error_handler - ERROR - Необработанное исключение: 'NoneType' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\users_utils.py", line 21, in get_current_user
    payload = decode_access_token(token)
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\JWTUtils.py", line 31, in decode_access_token
    return jwt.decode(
           ~~~~~~~~~~^
        token, auth_data["secret_key"], algorithms=[auth_data["algorithm"]]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'rsplit'
2025-02-22 22:29:06 - app - INFO - Логирование успешно настроено
2025-02-22 22:29:22 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:29:22 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:29:22 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:29:22 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:29:22 - middleware.error_handler - ERROR - Необработанное исключение: 'NoneType' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\users_utils.py", line 21, in get_current_user
    payload = decode_access_token(token)
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\JWTUtils.py", line 31, in decode_access_token
    return jwt.decode(
           ~~~~~~~~~~^
        token, auth_data["secret_key"], algorithms=[auth_data["algorithm"]]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'rsplit'
2025-02-22 22:31:09 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:31:09 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:31:10 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:31:10 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:31:10 - middleware.error_handler - ERROR - Необработанное исключение: 'NoneType' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\users_utils.py", line 21, in get_current_user
    if not token:
              ^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\JWTUtils.py", line 31, in decode_access_token
    
    auth_data = get_auth_data()
    try:
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'rsplit'
2025-02-22 22:31:19 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:31:19 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:31:20 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:31:20 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:31:20 - middleware.error_handler - ERROR - Необработанное исключение: 'NoneType' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\users_utils.py", line 21, in get_current_user
    if not token:
              ^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\JWTUtils.py", line 31, in decode_access_token
    
    auth_data = get_auth_data()
    try:
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'rsplit'
2025-02-22 22:32:17 - app - INFO - Логирование успешно настроено
2025-02-22 22:32:25 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:32:25 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:32:25 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:32:25 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:32:25 - middleware.error_handler - ERROR - Необработанное исключение: 'NoneType' object has no attribute 'rsplit'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\users_utils.py", line 21, in get_current_user
    if not token:
              ^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\JWTUtils.py", line 31, in decode_access_token
    
    auth_data = get_auth_data()
    try:
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jwt.py", line 142, in decode
    payload = jws.verify(token, key, algorithms, verify=verify_signature)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 70, in verify
    header, payload, signing_input, signature = _load(token)
                                                ~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\jose\jws.py", line 176, in _load
    signing_input, crypto_segment = jwt.rsplit(b".", 1)
                                    ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'rsplit'
2025-02-22 22:32:50 - app - INFO - Логирование успешно настроено
2025-02-22 22:33:04 - app - INFO - Логирование успешно настроено
2025-02-22 22:33:08 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:33:08 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:33:09 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:33:09 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:33:09 - middleware.error_handler - INFO - Исходящий ответ: 401
2025-02-22 22:33:28 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:33:28 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:33:29 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:33:29 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:33:29 - middleware.error_handler - INFO - Исходящий ответ: 401
2025-02-22 22:35:32 - app - INFO - Логирование успешно настроено
2025-02-22 22:37:29 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:37:29 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:37:29 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:37:30 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:37:30 - middleware.error_handler - INFO - Исходящий ответ: 401
2025-02-22 22:37:47 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:37:47 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:37:47 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:37:47 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:37:47 - middleware.error_handler - INFO - Исходящий ответ: 401
2025-02-22 22:55:42 - app - INFO - Приложение запущено
2025-02-22 22:55:42 - app - INFO - Приложение запущено
2025-02-22 22:55:52 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:55:52 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:55:52 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:55:52 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:55:52 - middleware.error_handler - INFO - Исходящий ответ: 401
2025-02-22 22:58:01 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:58:01 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:58:01 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:58:01 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:58:01 - middleware.error_handler - INFO - Исходящий ответ: 401
2025-02-22 22:58:07 - app - INFO - Приложение остановлено
2025-02-22 22:58:09 - app - INFO - Приложение запущено
2025-02-22 22:58:09 - app - INFO - Приложение остановлено
2025-02-22 22:58:11 - app - INFO - Приложение запущено
2025-02-22 22:58:13 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:58:13 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:58:14 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:58:14 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:58:14 - middleware.error_handler - INFO - Исходящий ответ: 401
2025-02-22 22:58:30 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 22:58:30 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 22:58:30 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:58:30 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 22:58:30 - middleware.error_handler - INFO - Исходящий ответ: 401
2025-02-22 22:59:39 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/docs
2025-02-22 22:59:39 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:59:40 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/openapi.json
2025-02-22 22:59:40 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:59:47 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/api/auth/test-logging
2025-02-22 22:59:47 - api.auth.router - INFO - Это info сообщение
2025-02-22 22:59:47 - api.auth.router - WARNING - Это warning сообщение
2025-02-22 22:59:47 - api.auth.router - ERROR - Это error сообщение: Тестовая ошибка
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\auth\router.py", line 73, in test_logging
ValueError: Тестовая ошибка
2025-02-22 22:59:47 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:59:49 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/api/auth/test-logging
2025-02-22 22:59:49 - api.auth.router - INFO - Это info сообщение
2025-02-22 22:59:49 - api.auth.router - WARNING - Это warning сообщение
2025-02-22 22:59:49 - api.auth.router - ERROR - Это error сообщение: Тестовая ошибка
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\auth\router.py", line 73, in test_logging
ValueError: Тестовая ошибка
2025-02-22 22:59:49 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 22:59:56 - app - INFO - Приложение остановлено
2025-02-22 23:00:09 - app - INFO - Приложение запущено
2025-02-22 23:00:14 - app - INFO - Приложение запущено
2025-02-22 23:00:23 - app - INFO - Приложение запущено
2025-02-22 23:00:31 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:00:31 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 23:00:32 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-02-22 23:01:12 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:01:12 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 23:01:13 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-02-22 23:03:17 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:03:17 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 23:03:18 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-02-22 23:03:22 - app - INFO - Приложение запущено
2025-02-22 23:03:24 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:03:24 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 23:03:25 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:03:25 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:03:25 - app - INFO - Запрос данных пользователя: 37
2025-02-22 23:03:25 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:03:47 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:03:47 - app - INFO - Запрос на обновление пользователя: 37
2025-02-22 23:03:47 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-22 23:03:47 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-22 23:03:47 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:03:47 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:03:47 - app - INFO - Запрос данных пользователя: 37
2025-02-22 23:03:47 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:03:53 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:03:53 - app - INFO - Запрос на обновление пользователя: 37
2025-02-22 23:03:53 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-22 23:03:53 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-22 23:03:53 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:03:53 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:03:53 - app - INFO - Запрос данных пользователя: 37
2025-02-22 23:03:53 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:04:01 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:04:01 - app - INFO - Запрос на обновление пользователя: 37
2025-02-22 23:04:01 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-22 23:04:01 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-22 23:04:01 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:04:01 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:04:01 - app - INFO - Запрос данных пользователя: 37
2025-02-22 23:04:01 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:07:22 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-22 23:07:22 - middleware.error_handler - INFO - Исходящий ответ: 405
2025-02-22 23:08:20 - app - INFO - Приложение остановлено
2025-02-22 23:09:10 - app - INFO - Приложение запущено
2025-02-22 23:09:13 - app - INFO - Приложение запущено
2025-02-22 23:09:16 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-22 23:09:16 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:09:21 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:09:21 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 23:09:22 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:09:22 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:09:22 - app - INFO - Запрос данных пользователя: 37
2025-02-22 23:09:22 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:09:29 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-22 23:09:29 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:09:42 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:09:42 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwa@mail.ru
2025-02-22 23:09:42 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwa@mail.ru
2025-02-22 23:09:42 - api.auth.auth_utils - INFO - Пользователь успешно создан: 53
2025-02-22 23:09:42 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}

2025-02-22 23:11:12 - app - INFO - Приложение запущено
2025-02-22 23:11:13 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:11:13 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwa@mail.ru
2025-02-22 23:11:13 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwa@mail.ru
2025-02-22 23:11:13 - api.auth.auth_utils - WARNING - Попытка регистрации с существующим email: asdwa@mail.ru
2025-02-22 23:11:13 - api.auth.auth_utils - ERROR - Ошибка при создании пользователя: 400: User with this email already exists
2025-02-22 23:11:13 - middleware.error_handler - INFO - Исходящий ответ: 400
2025-02-22 23:11:22 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:11:22 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwadasdwa@mail.ru
2025-02-22 23:11:22 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwadasdwa@mail.ru
2025-02-22 23:11:22 - api.auth.auth_utils - INFO - Пользователь успешно создан: 54
2025-02-22 23:11:22 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}

2025-02-22 23:14:04 - app - INFO - Приложение запущено
2025-02-22 23:14:08 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:14:08 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwadasdwa@mail.ru
2025-02-22 23:14:08 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwadasdwa@mail.ru
2025-02-22 23:14:08 - api.auth.auth_utils - WARNING - Попытка регистрации с существующим email: asdwadasdwa@mail.ru
2025-02-22 23:14:08 - api.auth.auth_utils - ERROR - Ошибка при создании пользователя: 400: User with this email already exists
2025-02-22 23:14:08 - middleware.error_handler - INFO - Исходящий ответ: 400
2025-02-22 23:14:50 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:14:50 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwadaasdsdwa@mail.ru
2025-02-22 23:14:50 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwadaasdsdwa@mail.ru
2025-02-22 23:14:50 - api.auth.auth_utils - INFO - Пользователь успешно создан: 55
2025-02-22 23:14:50 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}

2025-02-22 23:15:30 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:15:30 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwaasddaasdsdwa@mail.ru
2025-02-22 23:15:30 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwaasddaasdsdwa@mail.ru
2025-02-22 23:15:31 - api.auth.auth_utils - INFO - Пользователь успешно создан: 56
2025-02-22 23:15:31 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}

2025-02-22 23:15:35 - app - INFO - Приложение запущено
2025-02-22 23:15:37 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:15:37 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwaasddaaasdsdsdwa@mail.ru
2025-02-22 23:15:37 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwaasddaaasdsdsdwa@mail.ru
2025-02-22 23:15:37 - api.auth.auth_utils - INFO - Пользователь успешно создан: 57
2025-02-22 23:15:37 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-22 23:15:37 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:15:37 - api.auth.router - INFO - Попытка входа пользователя: asdwaasddaaasdsdsdwa@mail.ru
2025-02-22 23:15:38 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:15:38 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:15:38 - app - INFO - Запрос данных пользователя: 57
2025-02-22 23:15:38 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}

2025-02-22 23:16:53 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/docs
2025-02-22 23:16:53 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:16:53 - middleware.error_handler - INFO - Входящий запрос: GET http://127.0.0.1:8000/openapi.json
2025-02-22 23:16:53 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:17:05 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:17:05 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwaasddaaasawddsdsdwa@mail.ru
2025-02-22 23:17:05 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwaasddaaasawddsdsdwa@mail.ru
2025-02-22 23:17:05 - api.auth.auth_utils - INFO - Пользователь успешно создан: 58
2025-02-22 23:17:05 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-22 23:17:05 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:17:05 - api.auth.router - INFO - Попытка входа пользователя: asdwaasddaaasawddsdsdwa@mail.ru
2025-02-22 23:17:05 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:17:05 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:17:05 - app - INFO - Запрос данных пользователя: 58
2025-02-22 23:17:05 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}

2025-02-22 23:17:31 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:17:31 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwaasddaaasadwddsdsdwa@mail.ru
2025-02-22 23:17:31 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwaasddaaasadwddsdsdwa@mail.ru
2025-02-22 23:17:31 - api.auth.auth_utils - INFO - Пользователь успешно создан: 59
2025-02-22 23:17:31 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-22 23:17:31 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:17:31 - api.auth.router - INFO - Попытка входа пользователя: asdwaasddaaasadwddsdsdwa@mail.ru
2025-02-22 23:17:31 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:17:31 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:17:31 - app - INFO - Запрос данных пользователя: 59
2025-02-22 23:17:31 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'bool_type', 'loc': ('response', 'email_confirmed'), 'msg': 'Input should be a valid boolean', 'input': None}

2025-02-22 23:17:38 - app - INFO - Приложение запущено
2025-02-22 23:17:42 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:17:42 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdwaaswa@mail.ru
2025-02-22 23:17:42 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdwaaswa@mail.ru
2025-02-22 23:17:42 - api.auth.auth_utils - INFO - Пользователь успешно создан: 60
2025-02-22 23:17:42 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-22 23:17:42 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:17:42 - api.auth.router - INFO - Попытка входа пользователя: asdwaaswa@mail.ru
2025-02-22 23:17:43 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:17:43 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:17:43 - app - INFO - Запрос данных пользователя: 60
2025-02-22 23:17:43 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:17:55 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-22 23:17:55 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:18:32 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:18:32 - api.auth.router - INFO - Запрос на регистрацию пользователя: asdasdasd@asd.asd
2025-02-22 23:18:32 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: asdasdasd@asd.asd
2025-02-22 23:18:32 - api.auth.auth_utils - INFO - Пользователь успешно создан: 61
2025-02-22 23:18:32 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-22 23:18:32 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:18:32 - api.auth.router - INFO - Попытка входа пользователя: asdasdasd@asd.asd
2025-02-22 23:18:33 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:18:33 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:18:33 - app - INFO - Запрос данных пользователя: 61
2025-02-22 23:18:33 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:18:49 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:18:49 - middleware.error_handler - INFO - Исходящий ответ: 422
2025-02-22 23:18:49 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:18:49 - app - INFO - Запрос данных пользователя: 61
2025-02-22 23:18:49 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:20:59 - app - INFO - Приложение остановлено
2025-02-22 23:21:01 - app - INFO - Приложение запущено
2025-02-22 23:21:18 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:21:18 - middleware.error_handler - INFO - Исходящий ответ: 422
2025-02-22 23:21:18 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:21:18 - app - INFO - Запрос данных пользователя: 61
2025-02-22 23:21:18 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:22:30 - app - INFO - Приложение остановлено
2025-02-22 23:22:32 - app - INFO - Приложение запущено
2025-02-22 23:22:38 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:22:38 - middleware.error_handler - INFO - Исходящий ответ: 422
2025-02-22 23:22:38 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:22:38 - app - INFO - Запрос данных пользователя: 61
2025-02-22 23:22:38 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:25:50 - app - INFO - Приложение остановлено
2025-02-22 23:25:54 - app - INFO - Приложение запущено
2025-02-22 23:25:59 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:26:00 - app - INFO - Запрос на обновление пользователя: 61
2025-02-22 23:26:00 - services.user_service - INFO - Попытка обновления пользователя с ID: 61
2025-02-22 23:26:00 - services.user_service - INFO - Пользователь успешно обновлен: 61
2025-02-22 23:26:00 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:26:00 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:26:00 - app - INFO - Запрос данных пользователя: 61
2025-02-22 23:26:00 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:26:24 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:26:24 - app - INFO - Запрос на обновление пользователя: 61
2025-02-22 23:26:24 - services.user_service - INFO - Попытка обновления пользователя с ID: 61
2025-02-22 23:26:24 - services.user_service - INFO - Пользователь успешно обновлен: 61
2025-02-22 23:26:24 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:26:24 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:26:24 - app - INFO - Запрос данных пользователя: 61
2025-02-22 23:26:24 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:26:45 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-22 23:26:45 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:26:51 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:26:51 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 23:26:51 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:26:51 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:26:51 - app - INFO - Запрос данных пользователя: 37
2025-02-22 23:26:51 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:30:24 - app - INFO - Приложение остановлено
2025-02-22 23:30:26 - app - INFO - Приложение запущено
2025-02-22 23:30:26 - app - INFO - Приложение остановлено
2025-02-22 23:30:28 - app - INFO - Приложение запущено
2025-02-22 23:30:30 - app - INFO - Приложение запущено
2025-02-22 23:30:35 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-22 23:30:35 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:30:51 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-22 23:30:51 - api.auth.router - INFO - Запрос на регистрацию пользователя: new1@mail.ru
2025-02-22 23:30:51 - api.auth.auth_utils - INFO - Попытка создания пользователя с email: new1@mail.ru
2025-02-22 23:30:51 - api.auth.auth_utils - INFO - Пользователь успешно создан: 62
2025-02-22 23:30:51 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-22 23:30:51 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:30:51 - api.auth.router - INFO - Попытка входа пользователя: new1@mail.ru
2025-02-22 23:30:52 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:30:52 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:30:52 - app - INFO - Запрос данных пользователя: 62
2025-02-22 23:30:52 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:31:28 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-22 23:31:28 - app - INFO - Запрос на обновление пользователя: 62
2025-02-22 23:31:28 - services.user_service - INFO - Попытка обновления пользователя с ID: 62
2025-02-22 23:31:28 - services.user_service - INFO - Пользователь успешно обновлен: 62
2025-02-22 23:31:28 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:31:28 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:31:28 - app - INFO - Запрос данных пользователя: 62
2025-02-22 23:31:28 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:59:11 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-22 23:59:11 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:59:20 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:59:20 - api.auth.router - INFO - Попытка входа пользователя: new1@mail.ru
2025-02-22 23:59:21 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:59:21 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:59:21 - app - INFO - Запрос данных пользователя: 62
2025-02-22 23:59:21 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:59:26 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-22 23:59:26 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:59:32 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-22 23:59:32 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-22 23:59:32 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-22 23:59:32 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-22 23:59:32 - app - INFO - Запрос данных пользователя: 37
2025-02-22 23:59:32 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:37:51 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 01:37:51 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:37:55 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 01:37:55 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 01:37:55 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:37:55 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 01:37:55 - app - INFO - Запрос данных пользователя: 37
2025-02-23 01:37:55 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:38:01 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 01:38:01 - app - INFO - Запрос на обновление пользователя: 37
2025-02-23 01:38:01 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-23 01:38:01 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-23 01:38:01 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:38:01 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 01:38:01 - app - INFO - Запрос данных пользователя: 37
2025-02-23 01:38:01 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:38:02 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 01:38:02 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:38:06 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 01:38:06 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 01:38:06 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:38:06 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 01:38:06 - app - INFO - Запрос данных пользователя: 37
2025-02-23 01:38:06 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 01:38:16 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 01:38:16 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 10:09:06 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 10:09:06 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 10:09:06 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 10:09:06 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 10:09:06 - app - INFO - Запрос данных пользователя: 37
2025-02-23 10:09:06 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 15:30:43 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 15:30:43 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:25 - app - INFO - Приложение запущено
2025-02-23 19:10:29 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 19:10:29 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 19:10:29 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:29 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 19:10:29 - app - INFO - Запрос данных пользователя: 37
2025-02-23 19:10:29 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:35 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 19:10:35 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:38 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 19:10:38 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 19:10:38 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:38 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 19:10:38 - app - INFO - Запрос данных пользователя: 37
2025-02-23 19:10:38 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:45 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 19:10:45 - app - INFO - Запрос на обновление пользователя: 37
2025-02-23 19:10:45 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-23 19:10:45 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-23 19:10:45 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:45 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 19:10:45 - app - INFO - Запрос данных пользователя: 37
2025-02-23 19:10:45 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:46 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 19:10:46 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:50 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 19:10:50 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 19:10:50 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:50 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 19:10:50 - app - INFO - Запрос данных пользователя: 37
2025-02-23 19:10:50 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:10:54 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 19:10:54 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:14:28 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 19:14:28 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 19:14:28 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:14:28 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 19:14:28 - app - INFO - Запрос данных пользователя: 37
2025-02-23 19:14:28 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:14:34 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 19:14:34 - app - INFO - Запрос на обновление пользователя: 37
2025-02-23 19:14:34 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-23 19:14:34 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-23 19:14:34 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:14:34 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 19:14:34 - app - INFO - Запрос данных пользователя: 37
2025-02-23 19:14:34 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:14:36 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 19:14:36 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:15:23 - app - INFO - Приложение остановлено
2025-02-23 19:15:25 - app - INFO - Приложение запущено
2025-02-23 19:15:25 - app - INFO - Приложение остановлено
2025-02-23 19:15:27 - app - INFO - Приложение запущено
2025-02-23 19:31:19 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 19:31:19 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 19:31:19 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 19:31:19 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 19:31:19 - app - INFO - Запрос данных пользователя: 37
2025-02-23 19:31:19 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 20:54:46 - app - INFO - Приложение запущено
2025-02-23 21:04:19 - app - INFO - Приложение остановлено
2025-02-23 21:04:22 - app - INFO - Приложение запущено
2025-02-23 21:04:27 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 21:04:27 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:04:33 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:04:33 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:04:34 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:04:34 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:04:34 - app - INFO - Запрос данных пользователя: <coroutine object get_id_from_access_token at 0x000002264EE589E0>
2025-02-23 21:04:34 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x000002264EE487B0>}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x000002264EE487B0>}

2025-02-23 21:07:00 - app - INFO - Приложение запущено
2025-02-23 21:07:04 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:07:04 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:07:04 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:07:04 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:07:04 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:07:04 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x00000234E05C3EF0>}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x00000234E05C3EF0>}

2025-02-23 21:07:56 - app - INFO - Приложение запущено
2025-02-23 21:07:57 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:07:57 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:07:57 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:07:57 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:07:57 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:07:57 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x000001CE23A2BDE0>}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x000001CE23A2BDE0>}

2025-02-23 21:08:15 - app - INFO - Приложение остановлено
2025-02-23 21:08:17 - app - INFO - Приложение запущено
2025-02-23 21:08:20 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:08:20 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:08:20 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:08:20 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:08:20 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:08:20 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x0000028B1F5B7DE0>}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x0000028B1F5B7DE0>}

2025-02-23 21:10:05 - app - INFO - Приложение запущено
2025-02-23 21:10:07 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:10:07 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:10:07 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:10:07 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:10:07 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:10:07 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x0000029680D87EF0>}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x0000029680D87EF0>}

2025-02-23 21:10:55 - app - INFO - Приложение запущено
2025-02-23 21:11:04 - app - INFO - Приложение запущено
2025-02-23 21:11:05 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:11:05 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:11:05 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:11:05 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:11:05 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:11:05 - middleware.error_handler - ERROR - Необработанное исключение: 'coroutine' object has no attribute '__dict__'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\router.py", line 35, in get_me
    logger.info(f"данные пользователя: {current_user_data.__dict__}")
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute '__dict__'. Did you mean: '__dir__'?
2025-02-23 21:13:19 - app - INFO - Приложение запущено
2025-02-23 21:13:23 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:13:23 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:13:23 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:13:23 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:13:23 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:13:23 - app - INFO - данные пользователя: <coroutine object UserService.get_user_data at 0x0000023C1D61BDE0>
2025-02-23 21:13:23 - middleware.error_handler - ERROR - Необработанное исключение: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x0000023C1D61BDE0>}
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': <coroutine object UserService.get_user_data at 0x0000023C1D61BDE0>}

2025-02-23 21:16:37 - app - INFO - Приложение запущено
2025-02-23 21:16:38 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:16:38 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:16:39 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:16:39 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:16:39 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:16:39 - middleware.error_handler - ERROR - Необработанное исключение: 'coroutine' object has no attribute 'email'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\router.py", line 36, in get_me
    current_user_data = current_user_data.email
                        ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'email'
2025-02-23 21:17:28 - app - INFO - Приложение запущено
2025-02-23 21:17:30 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 21:17:30 - api.auth.router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 21:17:31 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:17:31 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:17:31 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:17:31 - app - INFO - данные пользователя: <models.User.User object at 0x000002417ABA87D0>
2025-02-23 21:17:31 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:19:49 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 21:19:49 - app - INFO - Запрос на обновление пользователя: <coroutine object get_id_from_access_token at 0x000002417A851700>
2025-02-23 21:19:49 - services.user_service - INFO - Попытка обновления пользователя с ID: <coroutine object get_id_from_access_token at 0x000002417A851700>
2025-02-23 21:19:49 - services.user_service - ERROR - Ошибка при обновлении пользователя <coroutine object get_id_from_access_token at 0x000002417A851700>: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)
[SQL: SELECT users.id, users.username, users.password, users.email, users.email_confirmed, users.is_active, users.is_superuser, users.first_name, users.last_name, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER]
[parameters: (<coroutine object get_id_from_access_token at 0x000002417A851700>,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-02-23 21:19:49 - middleware.error_handler - ERROR - Необработанное исключение: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)
[SQL: SELECT users.id, users.username, users.password, users.email, users.email_confirmed, users.is_active, users.is_superuser, users.first_name, users.last_name, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER]
[parameters: (<coroutine object get_id_from_access_token at 0x000002417A851700>,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "asyncpg\\protocol\\prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg\\protocol\\codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg\\protocol\\codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg\\pgproto\\./codecs/int.pyx", line 54, in asyncpg.pgproto.pgproto.int4_encode
TypeError: 'coroutine' object cannot be interpreted as an integer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 185, in bind_execute
  File "asyncpg\\protocol\\prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\router.py", line 54, in update_user
    return updated_user
                   ^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\services\user_service.py", line 39, in update_user
    logger.warning(f"Пользователь не найден: {user_id}")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)
[SQL: SELECT users.id, users.username, users.password, users.email, users.email_confirmed, users.is_active, users.is_superuser, users.first_name, users.last_name, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER]
[parameters: (<coroutine object get_id_from_access_token at 0x000002417A851700>,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-02-23 21:19:49 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:19:49 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:19:49 - app - INFO - данные пользователя: <models.User.User object at 0x000002417ABA8B90>
2025-02-23 21:19:49 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:20:15 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 21:20:15 - app - INFO - Запрос на обновление пользователя: <coroutine object get_id_from_access_token at 0x000002417AC31000>
2025-02-23 21:20:15 - services.user_service - INFO - Попытка обновления пользователя с ID: <coroutine object get_id_from_access_token at 0x000002417AC31000>
2025-02-23 21:20:15 - services.user_service - ERROR - Ошибка при обновлении пользователя <coroutine object get_id_from_access_token at 0x000002417AC31000>: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)
[SQL: SELECT users.id, users.username, users.password, users.email, users.email_confirmed, users.is_active, users.is_superuser, users.first_name, users.last_name, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER]
[parameters: (<coroutine object get_id_from_access_token at 0x000002417AC31000>,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-02-23 21:20:15 - middleware.error_handler - ERROR - Необработанное исключение: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)
[SQL: SELECT users.id, users.username, users.password, users.email, users.email_confirmed, users.is_active, users.is_superuser, users.first_name, users.last_name, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER]
[parameters: (<coroutine object get_id_from_access_token at 0x000002417AC31000>,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "asyncpg\\protocol\\prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg\\protocol\\codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg\\protocol\\codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg\\pgproto\\./codecs/int.pyx", line 54, in asyncpg.pgproto.pgproto.int4_encode
TypeError: 'coroutine' object cannot be interpreted as an integer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 185, in bind_execute
  File "asyncpg\\protocol\\prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\users\router.py", line 54, in update_user
    return updated_user
                   ^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\services\user_service.py", line 39, in update_user
    logger.warning(f"Пользователь не найден: {user_id}")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $1: <coroutine object get_id_from_access_tok... ('coroutine' object cannot be interpreted as an integer)
[SQL: SELECT users.id, users.username, users.password, users.email, users.email_confirmed, users.is_active, users.is_superuser, users.first_name, users.last_name, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER]
[parameters: (<coroutine object get_id_from_access_token at 0x000002417AC31000>,)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-02-23 21:20:15 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:20:15 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:20:15 - app - INFO - данные пользователя: <models.User.User object at 0x000002417ABA7490>
2025-02-23 21:20:15 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:20:20 - app - INFO - Приложение запущено
2025-02-23 21:20:24 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 21:20:24 - app - INFO - Запрос на обновление пользователя: 37
2025-02-23 21:20:24 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-23 21:20:24 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-23 21:20:24 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:20:24 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:20:24 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:20:24 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:20:44 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 21:20:44 - app - INFO - Запрос на обновление пользователя: 37
2025-02-23 21:20:44 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-23 21:20:44 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-23 21:20:44 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:20:44 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 21:20:44 - app - INFO - Запрос данных пользователя: 37
2025-02-23 21:20:44 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 21:25:19 - app - INFO - Приложение остановлено
2025-02-23 21:25:20 - app - INFO - Приложение запущено
2025-02-23 21:25:20 - app - INFO - Приложение остановлено
2025-02-23 21:25:21 - app - INFO - Приложение запущено
2025-02-23 21:30:19 - app - INFO - Приложение остановлено
2025-02-23 21:40:05 - app - INFO - Приложение запущено
2025-02-23 21:45:04 - app - INFO - Приложение остановлено
2025-02-23 21:45:05 - app - INFO - Приложение запущено
2025-02-23 21:45:05 - app - INFO - Приложение остановлено
2025-02-23 21:45:07 - app - INFO - Приложение запущено
2025-02-23 21:55:06 - app - INFO - Приложение остановлено
2025-02-23 21:55:08 - app - INFO - Приложение запущено
2025-02-23 21:55:08 - app - INFO - Приложение остановлено
2025-02-23 21:55:10 - app - INFO - Приложение запущено
2025-02-23 22:00:08 - app - INFO - Приложение остановлено
2025-02-23 22:00:10 - app - INFO - Приложение запущено
2025-02-23 22:05:08 - app - INFO - Приложение остановлено
2025-02-23 22:05:10 - app - INFO - Приложение запущено
2025-02-23 22:05:10 - app - INFO - Приложение остановлено
2025-02-23 22:05:11 - app - INFO - Приложение запущено
2025-02-23 22:10:10 - app - INFO - Приложение остановлено
2025-02-23 22:10:12 - app - INFO - Приложение запущено
2025-02-23 22:15:11 - app - INFO - Приложение остановлено
2025-02-23 22:15:13 - app - INFO - Приложение запущено
2025-02-23 22:15:13 - app - INFO - Приложение остановлено
2025-02-23 22:15:14 - app - INFO - Приложение запущено
2025-02-23 22:20:13 - app - INFO - Приложение остановлено
2025-02-23 22:20:14 - app - INFO - Приложение запущено
2025-02-23 22:20:14 - app - INFO - Приложение остановлено
2025-02-23 22:20:16 - app - INFO - Приложение запущено
2025-02-23 22:21:11 - app - INFO - Приложение запущено
2025-02-23 22:21:44 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 22:21:44 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:21:48 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 22:21:48 - api.auth.auth_router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 22:21:49 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:21:49 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 22:21:49 - app - INFO - Запрос данных пользователя: 37
2025-02-23 22:21:49 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:21:59 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 22:21:59 - app - INFO - Запрос на обновление пользователя: 37
2025-02-23 22:21:59 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-23 22:21:59 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-23 22:21:59 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:21:59 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 22:21:59 - app - INFO - Запрос данных пользователя: 37
2025-02-23 22:21:59 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:22:03 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 22:22:03 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:22:07 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 22:22:07 - api.auth.auth_router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 22:22:07 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:22:07 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 22:22:07 - app - INFO - Запрос данных пользователя: 37
2025-02-23 22:22:07 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:22:14 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 22:22:14 - app - INFO - Запрос на обновление пользователя: 37
2025-02-23 22:22:14 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-23 22:22:14 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-23 22:22:14 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:22:14 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 22:22:14 - app - INFO - Запрос данных пользователя: 37
2025-02-23 22:22:14 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:22:20 - middleware.error_handler - INFO - Входящий запрос: PATCH http://localhost:8000/api/users/update
2025-02-23 22:22:20 - app - INFO - Запрос на обновление пользователя: 37
2025-02-23 22:22:20 - services.user_service - INFO - Попытка обновления пользователя с ID: 37
2025-02-23 22:22:20 - services.user_service - INFO - Пользователь успешно обновлен: 37
2025-02-23 22:22:20 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:22:20 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 22:22:20 - app - INFO - Запрос данных пользователя: 37
2025-02-23 22:22:20 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:23:53 - app - INFO - Приложение запущено
2025-02-23 22:24:00 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 22:24:00 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:28:04 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-23 22:28:04 - api.auth.auth_router - INFO - Запрос на регистрацию пользователя: new2@mail.ru
2025-02-23 22:28:04 - services.auth_service - INFO - Попытка создания пользователя с email: new2@mail.ru
2025-02-23 22:28:04 - services.auth_service - ERROR - (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "username" отношения "users" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (63, null, razer1991, new2@mail.ru, f, t, f, null, null, 2025-02-23 22:28:04.131323+07, 2025-02-23 22:28:04.131323+07).
[SQL: INSERT INTO users (username, password, email, email_confirmed, is_active, is_superuser, first_name, last_name) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::BOOLEAN, $6::BOOLEAN, $7::VARCHAR, $8::VARCHAR) RETURNING users.id, users.created_at, users.updated_at]
[parameters: (None, 'razer1991', 'new2@mail.ru', False, True, False, None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.NotNullViolationError: значение NULL в столбце "username" отношения "users" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (63, null, razer1991, new2@mail.ru, f, t, f, null, null, 2025-02-23 22:28:04.131323+07, 2025-02-23 22:28:04.131323+07).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "username" отношения "users" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (63, null, razer1991, new2@mail.ru, f, t, f, null, null, 2025-02-23 22:28:04.131323+07, 2025-02-23 22:28:04.131323+07).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\services\auth_service.py", line 53, in create_user
    await self.db.commit()
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "username" отношения "users" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (63, null, razer1991, new2@mail.ru, f, t, f, null, null, 2025-02-23 22:28:04.131323+07, 2025-02-23 22:28:04.131323+07).
[SQL: INSERT INTO users (username, password, email, email_confirmed, is_active, is_superuser, first_name, last_name) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::BOOLEAN, $6::BOOLEAN, $7::VARCHAR, $8::VARCHAR) RETURNING users.id, users.created_at, users.updated_at]
[parameters: (None, 'razer1991', 'new2@mail.ru', False, True, False, None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-02-23 22:28:04 - middleware.error_handler - ERROR - Необработанное исключение: module 'starlette.status' has no attribute 'HTTP_500_INTERNAL'
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\auth\auth_router.py", line 33, in register_user
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\status.py", line 197, in __getattr__
    raise AttributeError(f"module '{__name__}' has no attribute '{name}'")
AttributeError: module 'starlette.status' has no attribute 'HTTP_500_INTERNAL'
2025-02-23 22:28:04 - app - INFO - Приложение остановлено
2025-02-23 22:28:05 - app - INFO - Приложение запущено
2025-02-23 22:28:05 - app - INFO - Приложение остановлено
2025-02-23 22:28:07 - app - INFO - Приложение запущено
2025-02-23 22:29:21 - app - INFO - Приложение остановлено
2025-02-23 22:29:26 - app - INFO - Приложение запущено
2025-02-23 22:29:26 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-23 22:29:26 - api.auth_router - INFO - Запрос на регистрацию пользователя: new2@mail.ru
2025-02-23 22:29:26 - services.auth_service - INFO - Попытка создания пользователя с email: new2@mail.ru
2025-02-23 22:29:26 - services.auth_service - INFO - Пользователь успешно создан: None
2025-02-23 22:29:26 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-23 22:29:26 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 22:29:26 - api.auth_router - INFO - Попытка входа пользователя: new2@mail.ru
2025-02-23 22:29:26 - middleware.error_handler - ERROR - Необработанное исключение: hash could not be identified
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\auth_router.py", line 40, in login
    token = await auth_service.login_user(login_data.email, login_data.password)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\services\auth_service.py", line 74, in login_user
    if not password_compare(password, user.password):
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\password_utils.py", line 13, in password_compare
    return pwd_context.verify(plain_password, hashed_password)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\passlib\context.py", line 2343, in verify
    record = self._get_or_identify_record(hash, scheme, category)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\passlib\context.py", line 2031, in _get_or_identify_record
    return self._identify_record(hash, category)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\passlib\context.py", line 1132, in identify_record
    raise exc.UnknownHashError("hash could not be identified")
passlib.exc.UnknownHashError: hash could not be identified
2025-02-23 22:30:13 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-23 22:30:13 - api.auth_router - INFO - Запрос на регистрацию пользователя: new3@mail.ru
2025-02-23 22:30:13 - services.auth_service - INFO - Попытка создания пользователя с email: new3@mail.ru
2025-02-23 22:30:13 - services.auth_service - INFO - Пользователь успешно создан: None
2025-02-23 22:30:13 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-23 22:30:13 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 22:30:13 - api.auth_router - INFO - Попытка входа пользователя: new3@mail.ru
2025-02-23 22:30:13 - middleware.error_handler - ERROR - Необработанное исключение: hash could not be identified
Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\sslinnn\Desktop\PartyFinder\middleware\error_handler.py", line 12, in error_handler
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\api\auth_router.py", line 40, in login
    token = await auth_service.login_user(login_data.email, login_data.password)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\services\auth_service.py", line 74, in login_user
    if not password_compare(password, user.password):
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\utils\password_utils.py", line 13, in password_compare
    return pwd_context.verify(plain_password, hashed_password)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\passlib\context.py", line 2343, in verify
    record = self._get_or_identify_record(hash, scheme, category)
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\passlib\context.py", line 2031, in _get_or_identify_record
    return self._identify_record(hash, category)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\sslinnn\Desktop\PartyFinder\.venv\Lib\site-packages\passlib\context.py", line 1132, in identify_record
    raise exc.UnknownHashError("hash could not be identified")
passlib.exc.UnknownHashError: hash could not be identified
2025-02-23 22:31:18 - app - INFO - Приложение запущено
2025-02-23 22:31:28 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/register
2025-02-23 22:31:28 - api.auth_router - INFO - Запрос на регистрацию пользователя: new3@mail.ru
2025-02-23 22:31:28 - services.auth_service - INFO - Попытка создания пользователя с email: new3@mail.ru
2025-02-23 22:31:28 - services.auth_service - INFO - Пользователь успешно создан: None
2025-02-23 22:31:28 - middleware.error_handler - INFO - Исходящий ответ: 201
2025-02-23 22:31:28 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 22:31:28 - api.auth_router - INFO - Попытка входа пользователя: new3@mail.ru
2025-02-23 22:31:29 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:31:29 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 22:31:29 - app - INFO - Запрос данных пользователя: 66
2025-02-23 22:31:29 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:33:34 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/auth/logout
2025-02-23 22:33:34 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:33:38 - middleware.error_handler - INFO - Входящий запрос: POST http://localhost:8000/api/auth/login
2025-02-23 22:33:38 - api.auth_router - INFO - Попытка входа пользователя: morison1991@mail.ru
2025-02-23 22:33:38 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:33:38 - middleware.error_handler - INFO - Входящий запрос: GET http://localhost:8000/api/users/me
2025-02-23 22:33:38 - app - INFO - Запрос данных пользователя: 37
2025-02-23 22:33:38 - middleware.error_handler - INFO - Исходящий ответ: 200
2025-02-23 22:41:17 - app - INFO - Приложение остановлено
2025-02-23 22:41:19 - app - INFO - Приложение запущено
2025-02-23 22:41:19 - app - INFO - Приложение остановлено
2025-02-23 22:41:21 - app - INFO - Приложение запущено
